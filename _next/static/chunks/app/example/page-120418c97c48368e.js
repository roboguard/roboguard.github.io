(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[711],{77626:(e,t,s)=>{Promise.resolve().then(s.bind(s,58658))},58658:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>J});var r=s(95155),a=s(38094),l=s(43474),n=s(82926),i=s(14056),c=s(2517),d=s(76426),o=s(71622),m=s(12115);let x=[{id:"1",timestamp:new Date("2024-01-30T10:45:00"),duration:8,source:"operator",camera:"Camera 1",saved:!0},{id:"2",timestamp:new Date("2024-01-30T10:42:00"),duration:15,source:"robot",camera:"Camera 2",saved:!0}];function u(){let[e,t]=(0,m.useState)(!1),[s,u]=(0,m.useState)(!0),[h,g]=(0,m.useState)(80),[p]=(0,m.useState)(["Please show your ID","This is a restricted area","Security has been notified","Please exit the building"]);return(0,r.jsxs)("div",{className:"rounded-lg bg-white p-4 shadow",children:[(0,r.jsx)("h3",{className:"mb-4 text-lg font-bold",children:"Two-Way Communication"}),(0,r.jsxs)("div",{className:"mb-4 grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"flex flex-col items-center rounded-lg bg-gray-50 p-4",children:[(0,r.jsx)("span",{className:"mb-2 text-sm font-medium",children:"Talk"}),(0,r.jsx)("button",{className:"rounded-full p-4 ".concat(e?"bg-red-500 text-white":"bg-gray-200 hover:bg-gray-300"),onClick:()=>t(!e),type:"button",children:e?(0,r.jsx)(a.A,{}):(0,r.jsx)(l.A,{})}),e&&(0,r.jsx)("div",{className:"mt-2 text-sm text-red-500",children:"Recording..."})]}),(0,r.jsxs)("div",{className:"flex flex-col items-center rounded-lg bg-gray-50 p-4",children:[(0,r.jsx)("span",{className:"mb-2 text-sm font-medium",children:"Listen"}),(0,r.jsx)("button",{className:"rounded-full p-4 ".concat(s?"bg-green-500 text-white":"bg-gray-200 hover:bg-gray-300"),onClick:()=>u(!s),type:"button",children:s?(0,r.jsx)(n.A,{}):(0,r.jsx)(i.A,{})}),s&&(0,r.jsx)("div",{className:"mt-2 text-sm text-green-500",children:"Active"})]})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("h4",{className:"mb-2 text-sm font-medium",children:"Quick Messages"}),(0,r.jsx)("div",{className:"grid grid-cols-2 gap-2",children:p.map((e,t)=>(0,r.jsx)("button",{className:"rounded-lg border border-gray-200 px-3 py-2 text-sm text-blue-600 hover:bg-gray-50",onClick:()=>{},type:"button",children:e},t))})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm font-medium",children:"Speaker Volume"}),(0,r.jsxs)("span",{className:"text-sm text-gray-500",children:[h,"%"]})]}),(0,r.jsx)("input",{type:"range",min:"0",max:"100",value:h,onChange:e=>g(Number(e.target.value)),className:"mt-2 w-full"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"mb-2 text-sm font-medium",children:"Recent Recordings"}),(0,r.jsx)("div",{className:"space-y-2",children:x.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between rounded-lg border border-gray-200 p-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("button",{className:"rounded-full bg-gray-100 p-1.5 hover:bg-gray-200",type:"button",children:(0,r.jsx)(c.A,{className:"size-4"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm font-medium",children:"operator"===e.source?"Operator Message":"Robot Audio"}),(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:[e.timestamp.toLocaleTimeString()," ","•",e.duration,"s"]})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[!e.saved&&(0,r.jsx)("button",{className:"rounded p-1 hover:bg-gray-100",type:"button",children:(0,r.jsx)(d.A,{className:"size-4 text-blue-500"})}),(0,r.jsx)(o.A,{className:"operator"===e.source?"text-blue-500":"text-green-500"})]})]},e.id))})]})]})}let h=(0,m.createContext)({socket:null,isConnected:!1,error:null}),g=()=>(0,m.useContext)(h);class p extends m.Component{static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,t){console.error("Uncaught error:",e,t)}render(){return this.state.hasError?this.props.fallback||(0,r.jsx)("div",{className:"flex h-full items-center justify-center rounded-lg bg-gray-900 p-4 text-white",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"mb-2",children:"Something went wrong"}),(0,r.jsx)("button",{type:"button",onClick:()=>this.setState({hasError:!1}),className:"rounded bg-blue-500 px-4 py-2 hover:bg-blue-600",children:"Try again"})]})}):this.props.children}constructor(...e){super(...e),this.state={hasError:!1}}}let b=(0,m.memo)(function(e){let{cameraId:t}=e,{socket:s,isConnected:a}=g(),[l,n]=(0,m.useState)(!0),[i,c]=(0,m.useState)(null),d=(0,m.useRef)(null),[o,x]=(0,m.useState)({width:320,height:240}),[u,h]=(0,m.useState)({width:320,height:240}),p=(0,m.useRef)(!1),b=(0,m.useRef)([]),j=(0,m.useRef)(!1),f=(0,m.useRef)(null),v=(0,m.useCallback)(()=>{if(f.current){let{naturalWidth:e,naturalHeight:t,clientWidth:s,clientHeight:r}=f.current;x({width:e,height:t}),h({width:s,height:r})}},[]);(0,m.useEffect)(()=>{let e=()=>{f.current&&v()};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[v]);let y=(0,m.useCallback)(()=>{if(0===b.current.length||j.current||!p.current)return;j.current=!0;let e=b.current.shift();if(e&&f.current){let t=URL.createObjectURL(e);f.current.src=t,n(!1),c(null),f.current.onload=()=>{URL.revokeObjectURL(t),j.current=!1,b.current.length>0&&requestAnimationFrame(y)}}else j.current=!1},[]),N=(0,m.useCallback)(e=>{if(p.current)try{var t;let s=new Uint8Array((null===(t=e.match(/.{1,2}/g))||void 0===t?void 0:t.map(e=>Number.parseInt(e,16)))||[]),r=new Blob([s],{type:"image/jpeg"});b.current.length>2&&(b.current=b.current.slice(-2)),b.current.push(r),requestAnimationFrame(y)}catch(e){c("Failed to process frame"),console.error("Frame processing error:",e)}},[]),w=(0,m.useCallback)(e=>{if(!d.current||!f.current)return;let t=d.current.getContext("2d");if(!t)return;let s=d.current.width,r=d.current.height,a=o.width,l=o.height,n=s/a,i=r/l;t.clearRect(0,0,s,r);let c=[],m=[];for(let t of e)"person"===t.class?c.push(t):m.push(t);let x=Math.max(12,Math.floor(16*Math.min(n,i)));if(t.font="".concat(x,"px sans-serif"),t.lineWidth=2,c.length>0){for(let e of(t.beginPath(),t.strokeStyle="#ff0000",t.fillStyle="#ff0000",c)){let[s,r,a,l]=e.bbox,c=s*n,d=r*i,o=a*n,m=l*i;t.rect(c,d,o-c,m-d);let x="".concat(e.class," ").concat((100*e.confidence).toFixed(0),"%");t.fillText(x,c,d-5)}t.stroke()}if(m.length>0){for(let e of(t.beginPath(),t.strokeStyle="#00ff00",t.fillStyle="#00ff00",m)){let[s,r,a,l]=e.bbox,c=s*n,d=r*i,o=a*n,m=l*i;t.rect(c,d,o-c,m-d);let x="".concat(e.class," ").concat((100*e.confidence).toFixed(0),"%");t.fillText(x,c,d-5)}t.stroke()}},[o.height,o.width]),k=(0,m.useCallback)(e=>{try{let s=JSON.parse(e.data);s.camera_id===t&&("stream"===s.type&&s.frame&&N(s.frame),s.detections&&w(s.detections))}catch(e){console.error("Error handling WebSocket message:",e)}},[t,N,w]);return((0,m.useEffect)(()=>{if(s)return s.addEventListener("message",k),p.current=!0,()=>{s.removeEventListener("message",k),p.current=!1}},[s]),i)?(0,r.jsx)("div",{className:"flex h-full items-center justify-center rounded-lg bg-gray-900 p-4 text-white",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"mb-2",children:i}),(0,r.jsx)("button",{type:"button",onClick:()=>window.location.reload(),className:"rounded bg-red-500 px-4 py-2 hover:bg-red-600",children:"Retry"})]})}):a?(0,r.jsxs)("div",{className:"relative overflow-hidden rounded-lg bg-gray-900",children:[l&&(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,r.jsx)("div",{className:"size-8 animate-spin rounded-full border-b-2 border-white"})}),(0,r.jsx)("img",{ref:f,alt:"Camera ".concat(t),className:"size-full object-cover",onLoad:v}),(0,r.jsxs)("div",{className:"absolute bottom-2 left-2 rounded bg-black/50 px-2 py-1 text-sm text-white",children:["Camera",t,a?"\uD83D\uDFE2":"\uD83D\uDD34"]}),(0,r.jsx)("canvas",{ref:d,className:"pointer-events-none absolute inset-0",width:u.width,height:u.height})]}):(0,r.jsxs)("div",{className:"relative overflow-hidden rounded-lg bg-gray-900",children:[(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 text-white",children:"Connecting..."}),(0,r.jsx)("img",{ref:f,alt:"Camera ".concat(t),className:"size-[300px] object-cover",onLoad:v}),(0,r.jsxs)("div",{className:"absolute bottom-2 left-2 rounded bg-black/50 px-2 py-1 text-sm text-white",children:["Camera",t,a?"\uD83D\uDFE2":"\uD83D\uDD34"]})]})});function j(){let{socket:e,isConnected:t}=g(),[s,a]=(0,m.useState)(null),[l,n]=(0,m.useState)(null);(0,m.useEffect)(()=>{if(!e||!t)return;let s=["1","2","3","4"];return s.forEach(t=>{e.send(JSON.stringify({type:"start_stream",camera_id:t}))}),()=>{s.forEach(t=>{e.send(JSON.stringify({type:"stop_stream",camera_id:t}))})}},[e,t]);let i=e=>{n(e),setTimeout(()=>n(null),3e3)},c={socket:e,isConnected:t};return s?(0,r.jsxs)("div",{className:"h-full",children:[(0,r.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,r.jsx)("button",{onClick:()=>a(null),className:"rounded bg-gray-700 px-3 py-1 text-white hover:bg-gray-600",type:"button",children:"Back to Grid"}),l===s&&(0,r.jsx)("div",{className:"rounded bg-red-500 px-3 py-1 text-white",children:"Motion Detected!"})]}),(0,r.jsx)("div",{className:"h-[calc(100%-2rem)]",children:(0,r.jsx)(p,{children:(0,r.jsx)(b,{cameraId:s,onMotionDetected:i,...c})})})]}):(0,r.jsx)("div",{className:"grid grid-cols-2 gap-4",children:["1","2","3","4"].map(e=>(0,r.jsx)("button",{className:"cursor-pointer ".concat(l===e?"rounded-lg ring-2 ring-red-500":""),onClick:()=>a(e),type:"button",children:(0,r.jsx)(p,{children:(0,r.jsx)(b,{cameraId:e,onMotionDetected:i,...c})})},e))})}function f(){let{isConnected:e,error:t}=g();return(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"size-2 rounded-full ".concat(t?"bg-red-500":e?"bg-green-500":"bg-yellow-500")}),(0,r.jsx)("span",{className:"text-sm text-gray-600",children:t?"Connection Error":e?"Connected":"Connecting..."})]})}var v=s(58581),y=s(24817),N=s(12800),w=s(66963),k=s(27112),C=s(16161);function S(){let{socket:e,isConnected:t}=g(),[s,a]=(0,m.useState)({}),l=(e,t)=>{let s=new Date().toLocaleTimeString();a(r=>{let a=[...(r[e]||{currentCount:0,history:[]}).history,{timestamp:s,count:t}];return{...r,[e]:{currentCount:t,history:a.slice(-30)}}})};(0,m.useEffect)(()=>{if(e)return e.onmessage=e=>{let t=JSON.parse(e.data);t.camera_id&&void 0!==t.person_count&&l(t.camera_id,t.person_count)},()=>{e.onmessage=null}},[e]);let n=(e,t)=>{let s=Math.max(...t.history.map(e=>e.count),0),a=t.history.length>0?Math.round(t.history.reduce((e,t)=>e+t.count,0)/t.history.length):0;return(0,r.jsxs)("div",{className:"mb-6 flex-1 rounded-lg border border-gray-200 bg-white p-4",children:[(0,r.jsxs)("h4",{className:"mb-3 font-medium",children:["Camera",e]}),(0,r.jsxs)("div",{className:"mb-4 text-sm text-gray-600",children:["Current Count:"," ",t.currentCount]}),(0,r.jsx)("div",{className:"mb-4 h-48 w-full",children:(0,r.jsx)(v.u,{width:"100%",height:"100%",children:(0,r.jsxs)(y.b,{data:t.history,children:[(0,r.jsx)(N.W,{dataKey:"timestamp",tick:{fontSize:12},interval:"preserveStartEnd"}),(0,r.jsx)(w.h,{domain:[0,"auto"],tick:{fontSize:12}}),(0,r.jsx)(k.m,{}),(0,r.jsx)(C.N,{type:"monotone",dataKey:"count",stroke:"#2563eb",strokeWidth:2,dot:!1,isAnimationActive:!1})]})})}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"rounded-lg bg-blue-50 p-3",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-gray-600",children:"Peak Count"}),(0,r.jsx)("div",{className:"text-xl font-bold text-blue-600",children:s})]}),(0,r.jsxs)("div",{className:"rounded-lg bg-green-50 p-3",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-gray-600",children:"Average Count"}),(0,r.jsx)("div",{className:"text-xl font-bold text-green-600",children:a})]})]})]},e)};return t?(0,r.jsxs)("div",{className:"mx-auto max-w-[1400px] rounded-lg bg-transparent py-4",children:[(0,r.jsx)("h3",{className:"mb-4 text-lg font-bold",children:"Recent Info"}),(0,r.jsx)("div",{className:"flex h-[420px] flex-wrap justify-center gap-4 overflow-y-auto",children:0===Object.entries(s).length?(0,r.jsx)("div",{className:"text-center text-gray-500",children:"No data available"}):Object.entries(s).map(e=>{let[t,s]=e;return n(t,s)})})]}):(0,r.jsxs)("div",{className:"rounded-lg bg-white p-4 shadow",children:[(0,r.jsx)("h3",{className:"mb-4 text-lg font-bold",children:"Recent Info"}),(0,r.jsx)("div",{className:"text-center text-gray-500",children:"Connecting..."})]})}var A=s(19581),L=s(96152);let E=[{id:"zone1",type:"restricted",points:"M50,50 L150,50 L150,150 L50,150 Z",label:"Server Room"},{id:"zone2",type:"patrol",points:"M200,100 L300,100 L300,200 L200,200 Z",label:"Main Corridor"},{id:"zone3",type:"alert",points:"M350,150 L450,150 L450,250 L350,250 Z",label:"Loading Dock"}];function M(){let[e,t]=(0,m.useState)({x:100,y:100,rotation:45,status:"active"});(0,m.useEffect)(()=>{let e=setInterval(()=>{t(e=>({...e,x:e.x+(Math.random()-.5)*10,y:e.y+(Math.random()-.5)*10,rotation:(e.rotation+5)%360}))},2e3);return()=>clearInterval(e)},[]);let s=e=>{switch(e){case"restricted":return"fill-red-200 stroke-red-500";case"patrol":return"fill-blue-200 stroke-blue-500";case"alert":return"fill-yellow-200 stroke-yellow-500"}};return(0,r.jsxs)("div",{className:"rounded-lg bg-white p-4 shadow",children:[(0,r.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-lg font-bold",children:"Patrol Map"}),(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,r.jsx)("div",{className:"size-3 rounded-full bg-red-500"}),(0,r.jsx)("span",{children:"Restricted"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,r.jsx)("div",{className:"size-3 rounded-full bg-blue-500"}),(0,r.jsx)("span",{children:"Patrol"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,r.jsx)("div",{className:"size-3 rounded-full bg-yellow-500"}),(0,r.jsx)("span",{children:"Alert"})]})]})]}),(0,r.jsxs)("div",{className:"relative h-[500px] w-full rounded-lg bg-gray-100",children:[(0,r.jsxs)("svg",{width:"100%",height:"100%",viewBox:"0 0 500 500",className:"absolute inset-0",children:[(0,r.jsx)("pattern",{id:"grid",width:"50",height:"50",patternUnits:"userSpaceOnUse",children:(0,r.jsx)("path",{d:"M 50 0 L 0 0 0 50",fill:"none",stroke:"rgba(0,0,0,0.1)",strokeWidth:"0.5"})}),(0,r.jsx)("rect",{width:"100%",height:"100%",fill:"url(#grid)"}),E.map(e=>(0,r.jsxs)("g",{children:[(0,r.jsx)("path",{d:e.points,className:"".concat(s(e.type)," opacity-50"),strokeWidth:"2"}),(0,r.jsx)("text",{x:"restricted"===e.type?60:"patrol"===e.type?210:360,y:"restricted"===e.type?100:"patrol"===e.type?150:200,className:"fill-gray-700 text-xs font-medium",children:e.label})]},e.id)),(0,r.jsxs)("g",{transform:"translate(".concat(e.x,",").concat(e.y,") rotate(").concat(e.rotation,")"),children:[(0,r.jsx)("circle",{r:"15",className:"".concat((e=>{switch(e){case"active":return"text-green-500";case"charging":return"text-yellow-500";case"alert":return"text-red-500"}})(e.status)," fill-current")}),(0,r.jsx)("path",{d:"M-5,-5 L5,0 L-5,5 Z",fill:"white"})]})]}),(0,r.jsxs)("div",{className:"absolute bottom-4 right-4 space-y-2",children:[(0,r.jsx)("button",{className:"rounded-full bg-white p-2 shadow hover:bg-gray-50",type:"button",children:(0,r.jsx)(A.A,{className:"size-6 text-blue-500"})}),(0,r.jsx)("button",{className:"rounded-full bg-white p-2 shadow hover:bg-gray-50",type:"button",children:(0,r.jsx)(L.A,{className:"size-6 text-red-500"})})]})]}),(0,r.jsxs)("div",{className:"mt-4 flex items-center justify-between rounded-lg bg-gray-50 p-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(A.A,{className:"text-blue-500"}),(0,r.jsx)("span",{className:"text-sm font-bold",children:"Current Location:"}),(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Main Building - Floor 1"})]}),(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsx)("span",{className:"text-sm text-gray-500",children:"Last Updated: 2 sec ago"})})]})]})}var z=s(1068),R=s(88012),D=s(69962),T=s(67746),_=s(67532),O=s(37195),W=s(87081);let P=[{id:"1",timestamp:new Date("2024-01-30T10:30:00"),type:"alert",camera:"Camera 1",description:"Unauthorized person detected in restricted area",severity:"high",details:"Person detected near server room entrance",thumbnail:"/thief.jpeg"},{id:"2",timestamp:new Date("2024-01-30T10:25:00"),type:"patrol",camera:"Camera 2",description:"Completed patrol route A",severity:"low"},{id:"3",timestamp:new Date("2024-01-30T10:20:00"),type:"detection",camera:"Camera 1",description:"Multiple people detected in loading dock",severity:"medium",thumbnail:"/multiple.jpeg"},{id:"4",timestamp:new Date("2024-01-30T10:15:00"),type:"battery",camera:"Camera 2",description:"Low battery warning (25%)",severity:"medium"},{id:"5",timestamp:new Date("2024-01-30T10:10:00"),type:"system",camera:"Camera 1",description:"System update completed",severity:"low"}];function U(){let[e,t]=(0,m.useState)("all"),[s]=(0,m.useState)(P),a=e=>{switch(e){case"alert":return(0,r.jsx)(z.A,{className:"text-red-500"});case"detection":return(0,r.jsx)(R.A,{className:"text-blue-500"});case"patrol":return(0,r.jsx)(D.A,{className:"text-green-500"});case"system":return(0,r.jsx)(T.A,{className:"text-purple-500"});case"battery":return(0,r.jsx)(_.A,{className:"text-yellow-500"});default:return(0,r.jsx)(O.A,{className:"text-gray-500"})}},l=e=>{switch(e){case"high":return"bg-red-100 border-red-500";case"medium":return"bg-yellow-100 border-yellow-500";case"low":return"bg-blue-100 border-blue-500"}};return(0,r.jsxs)("div",{className:"rounded-lg bg-white p-4 shadow",children:[(0,r.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-base font-bold",children:"Incident Timeline"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(W.A,{className:"size-4 text-gray-500"}),(0,r.jsxs)("select",{className:"rounded-md border border-gray-300 px-2 py-1 text-sm",value:e,onChange:e=>t(e.target.value),children:[(0,r.jsx)("option",{value:"all",children:"All Events"}),(0,r.jsx)("option",{value:"alert",children:"Alerts"}),(0,r.jsx)("option",{value:"detection",children:"Detections"}),(0,r.jsx)("option",{value:"patrol",children:"Patrol"}),(0,r.jsx)("option",{value:"system",children:"System"})]})]})]}),(0,r.jsx)("div",{className:"space-y-4",children:s.map(e=>(0,r.jsx)("div",{className:"relative rounded-lg border-l-4 p-4 ".concat(l(e.severity)),children:(0,r.jsxs)("div",{className:"flex items-start gap-4",children:[(0,r.jsx)("div",{className:"mt-1",children:a(e.type)}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"mb-1 flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm font-medium",children:e.description}),(0,r.jsx)("span",{className:"text-xs text-gray-500",children:e.timestamp.toLocaleTimeString()})]}),(0,r.jsxs)("div",{className:"mb-2 text-xs text-gray-600",children:[e.camera," ","•",e.type.charAt(0).toUpperCase()+e.type.slice(1)]}),e.details&&(0,r.jsx)("p",{className:"text-xs text-gray-600",children:e.details}),e.thumbnail&&(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsx)("img",{src:e.thumbnail,alt:"Incident thumbnail",className:"rounded",width:120,height:80})})]}),(0,r.jsx)("button",{className:"rounded px-3 py-1 text-sm font-medium text-blue-600 hover:bg-blue-50",onClick:()=>{},type:"button",children:"Details"})]})},e.id))})]})}function I(){return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,r.jsx)("header",{className:"mb-4 bg-white shadow",children:(0,r.jsx)("div",{className:"mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold tracking-tight text-gray-900",children:"Security Dashboard"}),(0,r.jsx)(f,{})]})})}),(0,r.jsx)(S,{}),(0,r.jsx)("main",{children:(0,r.jsxs)("div",{className:"mx-auto max-w-[1400px] py-6",children:[(0,r.jsxs)("div",{className:"mb-6 flex gap-6",children:[(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsx)(j,{})}),(0,r.jsx)("div",{className:"w-1/3",children:(0,r.jsx)(M,{})})]}),(0,r.jsxs)("div",{className:"flex gap-6",children:[(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsx)(U,{})}),(0,r.jsx)("div",{className:"w-1/3",children:(0,r.jsx)(u,{})})]})]})})]})}function F(){return(0,r.jsxs)("div",{className:"min-h-screen animate-pulse bg-gray-100",children:[(0,r.jsx)("header",{className:"bg-white shadow",children:(0,r.jsx)("div",{className:"mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8",children:(0,r.jsx)("div",{className:"h-8 w-48 rounded bg-gray-200"})})}),(0,r.jsx)("main",{children:(0,r.jsx)("div",{className:"mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex gap-6",children:[(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsx)("div",{className:"grid grid-cols-2 gap-4",children:[1,2,3,4].map(e=>(0,r.jsx)("div",{className:"aspect-video rounded bg-gray-200"},e))})}),(0,r.jsxs)("div",{className:"w-80 space-y-6",children:[(0,r.jsx)("div",{className:"h-64 rounded bg-gray-200"}),(0,r.jsx)("div",{className:"h-96 rounded bg-gray-200"})]})]})})})]})}function B(e){let{children:t}=e,s=(0,m.useRef)(null),[a,l]=(0,m.useState)(!1),[n,i]=(0,m.useState)(null);(0,m.useEffect)(()=>{let e=new WebSocket("wss://ec2-54-193-123-50.us-west-1.compute.amazonaws.com/ws");return e.onopen=()=>{console.log("WebSocket connected successfully"),l(!0),i(null)},e.onclose=()=>{console.log("WebSocket disconnected"),l(!1)},e.onerror=e=>{console.error("WebSocket error:",e),i(Error("WebSocket connection error"))},s.current=e,()=>{s.current&&(s.current.close(),s.current=null)}},[]);let c=(0,m.useMemo)(()=>({socket:s.current,isConnected:a,error:n}),[a,n]);return(0,r.jsx)(h.Provider,{value:c,children:t})}function J(){return(0,r.jsx)(p,{children:(0,r.jsx)(B,{children:(0,r.jsx)(m.Suspense,{fallback:(0,r.jsx)(F,{}),children:(0,r.jsx)(I,{})})})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[345,441,517,358],()=>t(77626)),_N_E=e.O()}]);